C51 COMPILER V9.60.7.0   BAI1                                                              09/18/2023 08:59:03 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE BAI1
OBJECT MODULE PLACED IN .\Objects\bai1.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE bai1.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\bai1
                    -.lst) TABS(2) OBJECT(.\Objects\bai1.obj)

line level    source

   1          #include <reg52.h>
   2          
   3          
   4          sbit SEG_A = P0^0;
   5          sbit SEG_B = P0^1;
   6          sbit SEG_C = P0^2;
   7          sbit SEG_D = P0^3;
   8          sbit SEG_E = P0^4;
   9          sbit SEG_F = P0^5;
  10          sbit SEG_G = P0^6;
  11          sbit SEG_DP = P0^7;
  12          
  13          
  14          sbit DIGIT_1 = P2^0;
  15          sbit DIGIT_2 = P2^1;
  16          sbit DIGIT_3 = P2^2;
  17          sbit DIGIT_4 = P2^3;
  18          
  19          
  20          unsigned int hour = 0;
  21          unsigned int minute = 0;
  22          unsigned int second = 0;
  23          
  24          
  25          void delay(unsigned int msec) {
  26   1          unsigned int i, j;
  27   1          for (i = 0; i < msec; i++)
  28   1              for (j = 0; j < 120; j++);
  29   1      }
  30          
  31          
  32          void displayDigit(unsigned char digit) {
  33   1          switch (digit) {
  34   2              case 0: P0 = 0x3f; break; 
  35   2              case 1: P0 = 0x06; break;
  36   2              case 2: P0 = 0x5b; break;
  37   2              case 3: P0 = 0x4f; break;
  38   2              case 4: P0 = 0x66; break;
  39   2              case 5: P0 = 0x6d; break;
  40   2              case 6: P0 = 0x7d; break;
  41   2              case 7: P0 = 0x07; break;
  42   2              case 8: P0 = 0x7f; break;
  43   2              case 9: P0 = 0x6f; break;
  44   2              default: P0 = 0x00; break;
  45   2          }
  46   1      }
  47          
  48          void displayTime() {
  49   1          // Gio
  50   1          DIGIT_1 = 1;
  51   1          DIGIT_2 = 0;
  52   1          displayDigit(hour / 10);
  53   1          delay(5);
  54   1          
C51 COMPILER V9.60.7.0   BAI1                                                              09/18/2023 08:59:03 PAGE 2   

  55   1          DIGIT_1 = 0;
  56   1          DIGIT_2 = 1;
  57   1          displayDigit(hour % 10);
  58   1          delay(5);
  59   1          
  60   1          // Phut
  61   1          DIGIT_2 = 0;
  62   1          DIGIT_3 = 1;
  63   1          displayDigit(minute / 10);
  64   1          delay(5);
  65   1          
  66   1          DIGIT_2 = 1;
  67   1          DIGIT_3 = 0;
  68   1          displayDigit(minute % 10);
  69   1          delay(5);
  70   1          
  71   1          // Giay
  72   1          DIGIT_3 = 0;
  73   1          DIGIT_4 = 1;
  74   1          displayDigit(second / 10);
  75   1          delay(5);
  76   1          
  77   1          DIGIT_3 = 1;
  78   1          DIGIT_4 = 0;
  79   1          displayDigit(second % 10);
  80   1          delay(5);
  81   1      }
  82          
  83          
  84          
  85          void main() {
  86   1          TMOD = 0x01;
  87   1          TH0 = 0xFC;
  88   1          TL0 = 0x18;
  89   1          TR0 = 1;
  90   1          ET0 = 1;
  91   1      
  92   1      
  93   1          // Gia tri ban dau
  94   1          hour = 12;
  95   1          minute = 0;
  96   1          second = 0;
  97   1      
  98   1        
  99   1          P0 = 0x00;
 100   1          P1 = 0x00;
 101   1          P2 = 0x00;
 102   1      
 103   1        
 104   1          EA = 1;
 105   1      
 106   1          while (1) {
 107   2              displayTime();
 108   2          }
 109   1      }
 110          
 111          
 112          void timer0_isr() interrupt 1 {
 113   1          TH0 = 0xFC;
 114   1          TL0 = 0x18;
 115   1          
 116   1          second++;
C51 COMPILER V9.60.7.0   BAI1                                                              09/18/2023 08:59:03 PAGE 3   

 117   1      
 118   1          if (second == 60) {
 119   2              second = 0;
 120   2              minute++;
 121   2              if (minute == 60) {
 122   3                  minute = 0;
 123   3                  hour++;
 124   3                  if (hour == 24) {
 125   4                      hour = 0;
 126   4                  }
 127   3              }
 128   2          }
 129   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    339    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
