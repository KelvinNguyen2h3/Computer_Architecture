C51 COMPILER V9.60.7.0   KEY4X4                                                            11/06/2023 08:24:50 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE KEY4X4
OBJECT MODULE PLACED IN Key4x4.OBJ
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Key4x4.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include "key4x4.h"
   2          unsigned char  KEY_4X4[4][4]={'7','8','9','_',
   3                            '4','5','6','_',
   4                          '1','2','3','_',
   5                            '0','+','-','='};
   6          unsigned char  KEY4X4_Push(void)
   7          {
   8   1      
   9   1        if((ROW1==0)|(ROW2==0)|(ROW3==0)|(ROW4==0))
  10   1          return 1;
  11   1        else 
  12   1          return 0;
  13   1      }
  14          
  15          void KEY4X4_CheckCol(unsigned char Col)
  16          {
  17   1            COL1=1;
  18   1          COL2=1;
  19   1          COL3=1;
  20   1          COL4=1;
  21   1        if(Col==0)
  22   1        {
  23   2          COL1=0;
  24   2        }
  25   1        else if(Col==1)
  26   1        {
  27   2          COL2=0;
  28   2        }
  29   1        else if(Col==2)
  30   1        {
  31   2          COL3=0;
  32   2        }
  33   1        else if(Col==3)
  34   1        {
  35   2          COL4=0;
  36   2        }
  37   1      }
  38          
  39          unsigned char KEY4X4_GetKey(void)
  40          {
  41   1        unsigned char i;
  42   1        //cho COL1 den COL4 =0
  43   1            COL1=0;
  44   1          COL2=0;
  45   1          COL3=0;
  46   1          COL4=0;
  47   1        if(KEY4X4_Push()==1)//phat hien co phim nhan
  48   1        {
  49   2          delay_ms(1);//chong nhieu
  50   2          if(KEY4X4_Push()==1)//xac dinh chac chan co nhan
  51   2          {     
  52   3            for(i=0;i<4;i++)//quet COL1 den COL3
  53   3            {       
  54   4              KEY4X4_CheckCol(i);
  55   4              
C51 COMPILER V9.60.7.0   KEY4X4                                                            11/06/2023 08:24:50 PAGE 2   

  56   4              if(ROW1==0)//neu hang thu 1 co nhan (ROW1)
  57   4                {
  58   5                  return KEY_4X4[0][i]; //tra ve ky tu nhan o ROW1 va COL quet tu COL1 den COL4
  59   5                }
  60   4              else if(ROW2==0)//neu hang thu 2 co nhan (ROW2)
  61   4                {
  62   5                  return KEY_4X4[1][i];//tra ve ky tu nhan o ROW2 va COL quet tu COL1 den COL4
  63   5                }
  64   4              else if(ROW3==0)//neu hang thu 2 co nhan (ROW2)
  65   4                { 
  66   5                  return KEY_4X4[2][i];//tra ve ky tu nhan o ROW3 va COL quet tu COL1 den COL4
  67   5                }
  68   4                  
  69   4              else if(ROW4==0)//neu hang thu 2 co nhan (ROW2)
  70   4                {
  71   5                  return KEY_4X4[3][i];//tra ve ky tu nhan o ROW4 va COL quet tu COL1 den COL4
  72   5                }
  73   4            }     
  74   3          }
  75   2        }
  76   1        return 0;//khong co nhan
  77   1      }
  78          void Keypad_Init()
  79            {
  80   1          COL1=0;
  81   1          COL2=0;
  82   1          COL3=0;
  83   1          COL4=0;
  84   1          ROW1=1;
  85   1          ROW2=1;
  86   1          ROW3=1;
  87   1          ROW4=1;
  88   1        }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    175    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
